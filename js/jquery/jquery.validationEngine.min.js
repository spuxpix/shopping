!function(e){"use strict";var t={init:function(a){return this.data("jqv")&&null!=this.data("jqv")||(a=t._saveOptions(this,a),e(document).on("click",".formError",function(){e(this).fadeOut(150,function(){e(this).parent(".formErrorOuter").remove(),e(this).remove()})})),this},attach:function(a){if(!e(this).is("form"))return alert("Sorry, jqv.attach() only applies to a form"),this;var r;return(r=a?t._saveOptions(this,a):this.data("jqv")).validateAttribute=this.find("[data-validation-engine*=validate]").length?"data-validation-engine":"class",r.binded&&(this.find("["+r.validateAttribute+"*=validate]").not("[type=checkbox]").not("[type=radio]").not(".datepicker").bind(r.validationEventTrigger,t._onFieldEvent),this.find("["+r.validateAttribute+"*=validate][type=checkbox],["+r.validateAttribute+"*=validate][type=radio]").bind("click",t._onFieldEvent),this.find("["+r.validateAttribute+"*=validate][class*=datepicker]").bind(r.validationEventTrigger,{delay:300},t._onFieldEvent)),r.autoPositionUpdate&&e(window).bind("resize",{noAnimation:!0,formElem:this},t.updatePromptsPosition),this.bind("submit",t._onSubmitEvent),this},detach:function(){if(!e(this).is("form"))return alert("Sorry, jqv.detach() only applies to a form"),this;var a=this.data("jqv");return this.find("["+a.validateAttribute+"*=validate]").not("[type=checkbox]").unbind(a.validationEventTrigger,t._onFieldEvent),this.find("["+a.validateAttribute+"*=validate][type=checkbox],[class*=validate][type=radio]").unbind("click",t._onFieldEvent),this.unbind("submit",t.onAjaxFormComplete),this.find("["+a.validateAttribute+"*=validate]").not("[type=checkbox]").die(a.validationEventTrigger,t._onFieldEvent),this.find("["+a.validateAttribute+"*=validate][type=checkbox]").die("click",t._onFieldEvent),this.die("submit",t.onAjaxFormComplete),this.removeData("jqv"),a.autoPositionUpdate&&e(window).unbind("resize",t.updatePromptsPosition),this},validate:function(){var a=e(this),r=null;if(a.is("form")&&!a.hasClass("validating")){a.addClass("validating");var i=a.data("jqv");r=t._validateFields(this),setTimeout(function(){a.removeClass("validating")},100),r&&i.onFormSuccess?i.onFormSuccess():!r&&i.onFormFailure&&i.onFormFailure()}else if(a.is("form"))a.removeClass("validating");else{i=a.closest("form").data("jqv");(r=t._validateField(a,i))&&i.onFieldSuccess?i.onFieldSuccess():i.onFieldFailure&&i.InvalidFields.length>0&&i.onFieldFailure()}return r},updatePromptsPosition:function(a){if(a&&this==window)var r=a.data.formElem,i=a.data.noAnimation;else r=e(this.closest("form"));var o=r.data("jqv");return r.find("["+o.validateAttribute+"*=validate]").not(":disabled").each(function(){var a=e(this);o.prettySelect&&a.is(":hidden")&&(a=r.find("#"+o.usePrefix+a.attr("id")+o.useSuffix));var s=t._getPrompt(a),l=e(s).find(".formErrorContent").html();s&&t._updatePrompt(a,e(s),l,void 0,!1,o,i)}),this},showPrompt:function(e,a,r,i){var o=this.closest("form").data("jqv");return o||(o=t._saveOptions(this,o)),r&&(o.promptPosition=r),o.showArrow=1==i,t._showPrompt(this,e,a,!1,o),this},hide:function(){var a,r=e(this).closest("form").data("jqv"),i=r&&r.fadeDuration?r.fadeDuration:.3;return a=e(this).is("form")?"parentForm"+t._getClassName(e(this).attr("id")):t._getClassName(e(this).attr("id"))+"formError",e("."+a).fadeTo(i,.3,function(){e(this).parent(".formErrorOuter").remove(),e(this).remove()}),this},hideAll:function(){var t=this.data("jqv"),a=t?t.fadeDuration:.3;return e(".formError").fadeTo(a,.3,function(){e(this).parent(".formErrorOuter").remove(),e(this).remove()}),this},_onFieldEvent:function(a){var r=e(this),i=r.closest("form").data("jqv");i.eventTrigger="field",window.setTimeout(function(){t._validateField(r,i),0==i.InvalidFields.length&&i.onFieldSuccess?i.onFieldSuccess():i.InvalidFields.length>0&&i.onFieldFailure&&i.onFieldFailure()},a.data?a.data.delay:0)},_onSubmitEvent:function(){var a=e(this),r=a.data("jqv");r.eventTrigger="submit";var i=t._validateFields(a);return i&&r.ajaxFormValidation?(t._validateFormWithAjax(a,r),!1):r.onValidationComplete?!!r.onValidationComplete(a,i):i},_checkAjaxStatus:function(t){var a=!0;return e.each(t.ajaxValidCache,function(e,t){if(!t)return a=!1,!1}),a},_checkAjaxFieldStatus:function(e,t){return 1==t.ajaxValidCache[e]},_validateFields:function(a){var r=a.data("jqv"),i=!1;a.trigger("jqv.form.validating");var o=null;if(a.find("["+r.validateAttribute+"*=validate]").not(":disabled").each(function(){var s=e(this),l=[];if(e.inArray(s.attr("name"),l)<0){if((i|=t._validateField(s,r))&&null==o&&(o=s.is(":hidden")&&r.prettySelect?s=a.find("#"+r.usePrefix+t._jqSelector(s.attr("id"))+r.useSuffix):s),r.doNotShowAllErrosOnSubmit)return!1;if(l.push(s.attr("name")),1==r.showOneMessage&&i)return!1}}),a.trigger("jqv.form.result",[i]),i){if(r.scroll){var s=o.offset().top,l=o.offset().left,n=r.promptPosition;if("string"==typeof n&&-1!=n.indexOf(":")&&(n=n.substring(0,n.indexOf(":"))),"bottomRight"!=n&&"bottomLeft"!=n){var d=t._getPrompt(o);d&&(s=d.offset().top)}if(r.isOverflown){var u=e(r.overflownDIV);if(!u.length)return!1;s+=u.scrollTop()+-parseInt(u.offset().top)-5,e(r.overflownDIV+":not(:animated)").animate({scrollTop:s},1100,function(){r.focusFirstField&&o.focus()})}else e("body,html").stop().animate({scrollTop:s,scrollLeft:l},1100,function(){r.focusFirstField&&o.focus()})}else r.focusFirstField&&o.focus();return!1}return!0},_validateFormWithAjax:function(a,r){var i=a.serialize(),o=r.ajaxmethod?r.ajaxmethod:"GET",s=r.ajaxFormValidationURL?r.ajaxFormValidationURL:a.attr("action"),l=r.dataType?r.dataType:"json";e.ajax({type:o,url:s,cache:!1,dataType:l,data:i,form:a,methods:t,options:r,beforeSend:function(){return r.onBeforeAjaxFormValidation(a,r)},error:function(e,a){t._ajaxError(e,a)},success:function(i){if("json"==l&&!0!==i){for(var o=!1,s=0;s<i.length;s++){var n=i[s],d=n[0],u=e(e("#"+d)[0]);if(1==u.length){var c=n[2];if(1==n[1])if(""!=c&&c){if(r.allrules[c])(f=r.allrules[c].alertTextOk)&&(c=f);t._showPrompt(u,c,"pass",!1,r,!0)}else t._closePrompt(u);else{var f;if(o|=!0,r.allrules[c])(f=r.allrules[c].alertText)&&(c=f);t._showPrompt(u,c,"",!1,r,!0)}}}r.onAjaxFormComplete(!o,a,i,r)}else r.onAjaxFormComplete(!0,a,i,r)}})},_validateField:function(a,r,i){if(a.attr("id")||(a.attr("id","form-validation-field-"+e.validationEngine.fieldIdCounter),++e.validationEngine.fieldIdCounter),a.is(":hidden")&&!r.prettySelect||a.parent().is(":hidden"))return!1;var o=a.attr(r.validateAttribute),s=/validate\[(.*)\]/.exec(o);if(!s)return!1;var l=s[1].split(/\[|,|\]/),n=a.attr("name"),d="",u="",c=!1,f=!1;r.isError=!1,r.showArrow=!0,r.maxErrorsPerField>0&&(f=!0);var v=e(a.closest("form"));for(var m in l)l[m]=l[m].replace(" ",""),""===l[m]&&delete l[m];m=0;for(var p=0;m<l.length;m++){if(f&&p>=r.maxErrorsPerField){if(!c){var g=e.inArray("required",l);c=-1!=g&&g>=m}break}var h=void 0;switch(l[m]){case"required":c=!0,h=t._getErrorMessage(v,a,l[m],l,m,r,t._required);break;case"custom":h=t._getErrorMessage(v,a,l[m],l,m,r,t._custom);break;case"groupRequired":var x="["+r.validateAttribute+"*="+l[m+1]+"]",_=v.find(x).eq(0);if(_[0]!=a[0]){t._validateField(_,r,i),r.showArrow=!0;continue}(h=t._getErrorMessage(v,a,l[m],l,m,r,t._groupRequired))&&(c=!0),r.showArrow=!1;break;case"ajax":(h=t._ajax(a,l,m,r))&&(u="load");break;case"minSize":h=t._getErrorMessage(v,a,l[m],l,m,r,t._minSize);break;case"maxSize":h=t._getErrorMessage(v,a,l[m],l,m,r,t._maxSize);break;case"min":h=t._getErrorMessage(v,a,l[m],l,m,r,t._min);break;case"max":h=t._getErrorMessage(v,a,l[m],l,m,r,t._max);break;case"past":h=t._getErrorMessage(v,a,l[m],l,m,r,t._past);break;case"future":h=t._getErrorMessage(v,a,l[m],l,m,r,t._future);break;case"dateRange":x="["+r.validateAttribute+"*="+l[m+1]+"]";r.firstOfGroup=v.find(x).eq(0),r.secondOfGroup=v.find(x).eq(1),(r.firstOfGroup[0].value||r.secondOfGroup[0].value)&&(h=t._getErrorMessage(v,a,l[m],l,m,r,t._dateRange)),h&&(c=!0),r.showArrow=!1;break;case"dateTimeRange":x="["+r.validateAttribute+"*="+l[m+1]+"]";r.firstOfGroup=v.find(x).eq(0),r.secondOfGroup=v.find(x).eq(1),(r.firstOfGroup[0].value||r.secondOfGroup[0].value)&&(h=t._getErrorMessage(v,a,l[m],l,m,r,t._dateTimeRange)),h&&(c=!0),r.showArrow=!1;break;case"maxCheckbox":a=e(v.find("input[name='"+n+"']")),h=t._getErrorMessage(v,a,l[m],l,m,r,t._maxCheckbox);break;case"minCheckbox":a=e(v.find("input[name='"+n+"']")),h=t._getErrorMessage(v,a,l[m],l,m,r,t._minCheckbox);break;case"equals":h=t._getErrorMessage(v,a,l[m],l,m,r,t._equals);break;case"funcCall":h=t._getErrorMessage(v,a,l[m],l,m,r,t._funcCall);break;case"creditCard":h=t._getErrorMessage(v,a,l[m],l,m,r,t._creditCard);break;case"condRequired":void 0!==(h=t._getErrorMessage(v,a,l[m],l,m,r,t._condRequired))&&(c=!0)}var b=!1;if("object"==typeof h)switch(h.status){case"_break":b=!0;break;case"_error":h=h.message;break;case"_error_no_prompt":return!0}if(b)break;"string"==typeof h&&(d+=h+"<br/>",r.isError=!0,p++)}!c&&a.val().length<1&&(r.isError=!1);var C=a.prop("type");("radio"==C||"checkbox"==C)&&v.find("input[name='"+n+"']").size()>1&&(a=e(v.find("input[name='"+n+"'][type!=hidden]:first")),r.showArrow=!1),a.is(":hidden")&&r.prettySelect&&(a=v.find("#"+r.usePrefix+t._jqSelector(a.attr("id"))+r.useSuffix)),r.isError?t._showPrompt(a,d,u,!1,r):t._closePrompt(a),a.trigger("jqv.field.result",[a,r.isError,d]);var T=e.inArray(a[0],r.InvalidFields);return-1==T?r.isError&&r.InvalidFields.push(a[0]):r.isError||r.InvalidFields.splice(T,1),t._handleStatusCssClasses(a,r),r.isError},_handleStatusCssClasses:function(e,t){t.addSuccessCssClassToField&&e.removeClass(t.addSuccessCssClassToField),t.addFailureCssClassToField&&e.removeClass(t.addFailureCssClassToField),t.addSuccessCssClassToField&&!t.isError&&e.addClass(t.addSuccessCssClassToField),t.addFailureCssClassToField&&t.isError&&e.addClass(t.addFailureCssClassToField)},_getErrorMessage:function(a,r,i,o,s,l,n){var d=i;"custom"==i&&(i="custom["+o[jQuery.inArray(i,o)+1]+"]");var u,c=(r.attr("data-validation-engine")?r.attr("data-validation-engine"):r.attr("class")).split(" ");if(null!=(u="future"==i||"past"==i||"maxCheckbox"==i||"minCheckbox"==i?n(a,r,o,s,l):n(r,o,s,l))){var f=t._getCustomErrorMessage(e(r),c,d,l);f&&(u=f)}return u},_getCustomErrorMessage:function(e,a,r,i){var o=!1,s=t._validityProp[r];if(null!=s&&null!=(o=e.attr("data-errormessage-"+s)))return o;if(null!=(o=e.attr("data-errormessage")))return o;var l="#"+e.attr("id");if(void 0!==i.custom_error_messages[l]&&void 0!==i.custom_error_messages[l][r])o=i.custom_error_messages[l][r].message;else if(a.length>0)for(var n=0;n<a.length&&a.length>0;n++){var d="."+a[n];if(void 0!==i.custom_error_messages[d]&&void 0!==i.custom_error_messages[d][r]){o=i.custom_error_messages[d][r].message;break}}return o||void 0===i.custom_error_messages[r]||void 0===i.custom_error_messages[r].message||(o=i.custom_error_messages[r].message),o},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",funcCall:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing"},_required:function(t,a,r,i){switch(t.prop("type")){case"text":case"password":case"textarea":case"file":case"select-one":case"select-multiple":default:if(!e.trim(t.val())||t.val()==t.attr("data-validation-placeholder")||t.val()==t.attr("placeholder"))return i.allrules[a[r]].alertText;break;case"radio":case"checkbox":var o=t.closest("form"),s=t.attr("name");if(0==o.find("input[name='"+s+"']:checked").size())return 1==o.find("input[name='"+s+"']:visible").size()?i.allrules[a[r]].alertTextCheckboxe:i.allrules[a[r]].alertTextCheckboxMultiple}},_groupRequired:function(a,r,i,o){var s="["+o.validateAttribute+"*="+r[i+1]+"]",l=!1;if(a.closest("form").find(s).each(function(){if(!t._required(e(this),r,i,o))return l=!0,!1}),!l)return o.allrules[r[i]].alertText},_custom:function(e,t,a,r){var i,o=t[a+1],s=r.allrules[o];if(s)if(s.regex){var l=s.regex;if(!l)return void alert("jqv:custom regex not found - "+o);if(!new RegExp(l).test(e.val()))return r.allrules[o].alertText}else{if(!s.func)return void alert("jqv:custom type not allowed "+o);if("function"!=typeof(i=s.func))return void alert("jqv:custom parameter 'function' is no function - "+o);if(!i(e,t,a,r))return r.allrules[o].alertText}else alert("jqv:custom rule not found - "+o)},_funcCall:function(e,t,a,r){var i,o=t[a+1];if(o.indexOf(".")>-1){for(var s=o.split("."),l=window;s.length;)l=l[s.shift()];i=l}else i=window[o]||r.customFunctions[o];if("function"==typeof i)return i(e,t,a,r)},_equals:function(t,a,r,i){var o=a[r+1];if(t.val()!=e("#"+o).val())return i.allrules.equals.alertText},_maxSize:function(e,t,a,r){var i=t[a+1];if(e.val().length>i){var o=r.allrules.maxSize;return o.alertText+i+o.alertText2}},_minSize:function(e,t,a,r){var i=t[a+1];if(e.val().length<i){var o=r.allrules.minSize;return o.alertText+i+o.alertText2}},_min:function(e,t,a,r){var i=parseFloat(t[a+1]);if(parseFloat(e.val())<i){var o=r.allrules.min;return o.alertText2?o.alertText+i+o.alertText2:o.alertText+i}},_max:function(e,t,a,r){var i=parseFloat(t[a+1]);if(parseFloat(e.val())>i){var o=r.allrules.max;return o.alertText2?o.alertText+i+o.alertText2:o.alertText+i}},_past:function(a,r,i,o,s){var l,n=i[o+1],d=e(a.find("input[name='"+n.replace(/^#+/,"")+"']"));if("now"==n.toLowerCase())l=new Date;else if(null!=d.val()){if(d.is(":disabled"))return;l=t._parseDate(d.val())}else l=t._parseDate(n);if(t._parseDate(r.val())>l){var u=s.allrules.past;return u.alertText2?u.alertText+t._dateToString(l)+u.alertText2:u.alertText+t._dateToString(l)}},_future:function(a,r,i,o,s){var l,n=i[o+1],d=e(a.find("input[name='"+n.replace(/^#+/,"")+"']"));if("now"==n.toLowerCase())l=new Date;else if(null!=d.val()){if(d.is(":disabled"))return;l=t._parseDate(d.val())}else l=t._parseDate(n);if(t._parseDate(r.val())<l){var u=s.allrules.future;return u.alertText2?u.alertText+t._dateToString(l)+u.alertText2:u.alertText+t._dateToString(l)}},_isDate:function(e){return new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/).test(e)},_isDateTime:function(e){return new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/).test(e)},_dateCompare:function(e,t){return new Date(e.toString())<new Date(t.toString())},_dateRange:function(e,a,r,i){return!i.firstOfGroup[0].value&&i.secondOfGroup[0].value||i.firstOfGroup[0].value&&!i.secondOfGroup[0].value?i.allrules[a[r]].alertText+i.allrules[a[r]].alertText2:t._isDate(i.firstOfGroup[0].value)&&t._isDate(i.secondOfGroup[0].value)&&t._dateCompare(i.firstOfGroup[0].value,i.secondOfGroup[0].value)?void 0:i.allrules[a[r]].alertText+i.allrules[a[r]].alertText2},_dateTimeRange:function(e,a,r,i){return!i.firstOfGroup[0].value&&i.secondOfGroup[0].value||i.firstOfGroup[0].value&&!i.secondOfGroup[0].value?i.allrules[a[r]].alertText+i.allrules[a[r]].alertText2:t._isDateTime(i.firstOfGroup[0].value)&&t._isDateTime(i.secondOfGroup[0].value)&&t._dateCompare(i.firstOfGroup[0].value,i.secondOfGroup[0].value)?void 0:i.allrules[a[r]].alertText+i.allrules[a[r]].alertText2},_maxCheckbox:function(e,t,a,r,i){var o=a[r+1],s=t.attr("name");if(e.find("input[name='"+s+"']:checked").size()>o)return i.showArrow=!1,i.allrules.maxCheckbox.alertText2?i.allrules.maxCheckbox.alertText+" "+o+" "+i.allrules.maxCheckbox.alertText2:i.allrules.maxCheckbox.alertText},_minCheckbox:function(e,t,a,r,i){var o=a[r+1],s=t.attr("name");if(e.find("input[name='"+s+"']:checked").size()<o)return i.showArrow=!1,i.allrules.minCheckbox.alertText+" "+o+" "+i.allrules.minCheckbox.alertText2},_creditCard:function(e,t,a,r){var i=!1,o=e.val().replace(/ +/g,"").replace(/-+/g,""),s=o.length;if(s>=14&&s<=16&&parseInt(o)>0){var l,n=0,d=(a=s-1,1),u=new String;do{l=parseInt(o.charAt(a)),u+=d++%2==0?2*l:l}while(--a>=0);for(a=0;a<u.length;a++)n+=parseInt(u.charAt(a));i=n%10==0}if(!i)return r.allrules.creditCard.alertText},_ajax:function(a,r,i,o){var s=r[i+1],l=o.allrules[s],n=l.extraData,d=l.extraDataDynamic,u={fieldId:a.attr("id"),fieldValue:a.val()};if("object"==typeof n)e.extend(u,n);else if("string"==typeof n){var c=n.split("&");for(i=0;i<c.length;i++){var f=c[i].split("=");f[0]&&f[0]&&(u[f[0]]=f[1])}}if(d){var v=String(d).split(",");for(i=0;i<v.length;i++){var m=v[i];if(e(m).length){var p=a.closest("form").find(m).val();m.replace("#",""),escape(p);u[m.replace("#","")]=p}}}if("field"==o.eventTrigger&&delete o.ajaxValidCache[a.attr("id")],!o.isError&&!t._checkAjaxFieldStatus(a.attr("id"),o))return e.ajax({type:o.ajaxFormValidationMethod,url:l.url,cache:!1,dataType:"json",data:u,field:a,rule:l,methods:t,options:o,beforeSend:function(){},error:function(e,a){t._ajaxError(e,a)},success:function(r){var i=r[0],s=e("#"+i+"']").eq(0);if(1==s.length){var n=r[1],d=r[2];if(n){if(o.ajaxValidCache[i]=!0,d){if(o.allrules[d])(u=o.allrules[d].alertTextOk)&&(d=u)}else d=l.alertTextOk;d?t._showPrompt(s,d,"pass",!0,o):t._closePrompt(s),"submit"==o.eventTrigger&&a.closest("form").submit()}else{var u;if(o.ajaxValidCache[i]=!1,o.isError=!0,d){if(o.allrules[d])(u=o.allrules[d].alertText)&&(d=u)}else d=l.alertText;t._showPrompt(s,d,"",!0,o)}}s.trigger("jqv.field.result",[s,o.isError,d])}}),l.alertTextLoad},_ajaxError:function(e,t){0==e.status&&null==t?alert("The page is not served from a server! ajax call failed"):"undefined"!=typeof console&&console.log("Ajax error: "+e.status+" "+t)},_dateToString:function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},_parseDate:function(e){var t=e.split("-");return t==e&&(t=e.split("/")),new Date(t[0],t[1]-1,t[2])},_showPrompt:function(e,a,r,i,o,s){var l=t._getPrompt(e);s&&(l=!1),l?t._updatePrompt(e,l,a,r,i,o):t._buildPrompt(e,a,r,i,o)},_buildPrompt:function(a,r,i,o,s){var l=e("<div>");switch(l.addClass(t._getClassName(a.attr("id"))+"formError"),l.addClass("parentForm"+t._getClassName(a.parents("form").attr("id"))),l.addClass("formError"),i){case"pass":l.addClass("greenPopup");break;case"load":l.addClass("blackPopup")}o&&l.addClass("ajaxed");e("<div>").addClass("formErrorContent").html(r).appendTo(l);if(s.showArrow){var n=e("<div>").addClass("formErrorArrow"),d=a.data("promptPosition")||s.promptPosition;if("string"==typeof d)-1!=(u=d.indexOf(":"))&&(d=d.substring(0,u));switch(d){case"bottomLeft":case"bottomRight":l.find(".formErrorContent").before(n),n.addClass("formErrorArrowBottom").html('<div class="line1">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line10">\x3c!-- --\x3e</div>');break;case"topLeft":case"topRight":n.html('<div class="line10">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line1">\x3c!-- --\x3e</div>'),l.append(n)}}a.closest(".ui-dialog").length&&l.addClass("formErrorInsideDialog"),l.css({opacity:0,position:"absolute"}),a.before(l);var u=t._calculatePosition(a,l,s);return l.css({top:u.callerTopPosition,left:u.callerleftPosition,marginTop:u.marginTopSize,opacity:0}).data("callerField",a),s.autoHidePrompt&&setTimeout(function(){l.animate({opacity:0},function(){l.closest(".formErrorOuter").remove(),l.remove()})},s.autoHideDelay),l.animate({opacity:.87})},_updatePrompt:function(e,a,r,i,o,s,l){if(a){void 0!==i&&("pass"==i?a.addClass("greenPopup"):a.removeClass("greenPopup"),"load"==i?a.addClass("blackPopup"):a.removeClass("blackPopup")),o?a.addClass("ajaxed"):a.removeClass("ajaxed"),a.find(".formErrorContent").html(r);var n=t._calculatePosition(e,a,s),d={top:n.callerTopPosition,left:n.callerleftPosition,marginTop:n.marginTopSize};l?a.css(d):a.animate(d)}},_closePrompt:function(e){var a=t._getPrompt(e);a&&a.fadeTo("fast",0,function(){a.parent(".formErrorOuter").remove(),a.remove()})},closePrompt:function(e){return t._closePrompt(e)},_getPrompt:function(a){var r=e(a).closest("form").attr("id"),i=t._getClassName(a.attr("id"))+"formError",o=e("."+t._escapeExpression(i)+".parentForm"+r)[0];if(o)return e(o)},_escapeExpression:function(e){return e.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(t){var a=e(document),r=e("body"),i=t&&t.hasClass("rtl")||t&&"rtl"===(t.attr("dir")||"").toLowerCase()||a.hasClass("rtl")||"rtl"===(a.attr("dir")||"").toLowerCase()||r.hasClass("rtl")||"rtl"===(r.attr("dir")||"").toLowerCase();return Boolean(i)},_calculatePosition:function(e,t,a){var r,i,o,s=e.width(),l=e.position().left,n=e.position().top;e.height();r=i=0,o=-t.height();var d=e.data("promptPosition")||a.promptPosition,u="",c="",f=0,v=0;switch("string"==typeof d&&-1!=d.indexOf(":")&&(u=d.substring(d.indexOf(":")+1),d=d.substring(0,d.indexOf(":")),-1!=u.indexOf(",")&&(c=u.substring(u.indexOf(",")+1),u=u.substring(0,u.indexOf(",")),v=parseInt(c),isNaN(v)&&(v=0)),f=parseInt(u),isNaN(u)&&(u=0)),d){default:case"topRight":i+=l+s-30,r+=n;break;case"topLeft":r+=n,i+=l;break;case"centerRight":r=n+4,o=0,i=l+e.outerWidth(!0)+5;break;case"centerLeft":i=l-(t.width()+2),r=n+4,o=0;break;case"bottomLeft":r=n+e.height()+5,o=0,i=l;break;case"bottomRight":i=l+s-30,r=n+e.height()+5,o=0}return{callerTopPosition:(r+=v)+"px",callerleftPosition:(i+=f)+"px",marginTopSize:o+"px"}},_saveOptions:function(t,a){if(e.validationEngineLanguage)var r=e.validationEngineLanguage.allRules;else e.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");e.validationEngine.defaults.allrules=r;var i=e.extend(!0,{},e.validationEngine.defaults,a);return t.data("jqv",i),i},_getClassName:function(e){if(e)return e.replace(/:/g,"_").replace(/\./g,"_")},_jqSelector:function(e){return e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(e,a,r,i){var o,s;for(o=r+1;o<a.length;o++)if((s=jQuery("#"+a[o]).first()).length&&null==t._required(s,["required"],0,i))return t._required(e,["required"],0,i)}};e.fn.validationEngine=function(a){var r=e(this);return r[0]?"string"==typeof a&&"_"!=a.charAt(0)&&t[a]?("showPrompt"!=a&&"hide"!=a&&"hideAll"!=a&&t.init.apply(r),t[a].apply(r,Array.prototype.slice.call(arguments,1))):"object"!=typeof a&&a?void e.error("Method "+a+" does not exist in jQuery.validationEngine"):(t.init.apply(r,arguments),t.attach.apply(r)):r},e.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:!0,focusFirstField:!0,promptPosition:"topRight",bindMethod:"bind",inlineAjax:!1,ajaxFormValidation:!1,ajaxFormValidationURL:!1,ajaxFormValidationMethod:"get",onAjaxFormComplete:e.noop,onBeforeAjaxFormValidation:e.noop,onValidationComplete:!1,doNotShowAllErrosOnSubmit:!1,custom_error_messages:{},binded:!0,showArrow:!0,isError:!1,maxErrorsPerField:!1,ajaxValidCache:{},autoPositionUpdate:!1,InvalidFields:[],onFieldSuccess:!1,onFieldFailure:!1,onFormSuccess:!1,onFormFailure:!1,addSuccessCssClassToField:!1,addFailureCssClassToField:!1,autoHidePrompt:!1,autoHideDelay:1e4,fadeDuration:.3,prettySelect:!1,usePrefix:"",useSuffix:"",showOneMessage:!1}},e(function(){e.validationEngine.defaults.promptPosition=t.isRTL()?"topLeft":"topRight"})}(jQuery);